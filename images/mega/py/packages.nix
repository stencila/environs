{ nixpkgs }:

let
  lib = nixpkgs.lib;

  corePackages = import ../../core/py/packages.nix { inherit nixpkgs; };

  extraPackages = lib.filter (p: p != null) (with nixpkgs.pythonPackages; [
    acme
    adal
    agate
    agate-dbf
    agate-excel
    agate-sql
    alabaster
    alembic
    amqp
    aniso8601
    anyjson
    apipkg
    appdirs
    APScheduler
    apsw
    argcomplete
    argh
    argparse
    args
    arrow
    asn1crypto
    astroid
    attrdict
    attrs
    augeas
    autobahn
    automat
    automaton
    autopep8
    avro
    awscli
    backports_abc
    backports_functools_lru_cache
    backports_lzma
    backports_shutil_get_terminal_size
    backports_ssl_match_hostname
    backports_weakref
    bandit
    bcdoc
    bcrypt
    beautifulsoup
    beautifulsoup4
    behave
    billiard
    binaryornot
    bleach
    blessings
    blinker
    bokeh
    boto
    boto3
    botocore
    bottle
    brotlipy
    BTrees
    bz2file
    cached-property
    cachetools
    cairocffi
    cairosvg
    capstone
    carbon
    cassandra-driver
    celery
    cerberus
    certifi
    cffi
    chardet
    cheroot
    cherrypy
    click
    clint
    cloudpickle
    cmd2
    codecov
    colorama
    colorlog
    CommonMark
    configobj
    configparser
    constantly
    consul
    contextlib2
    cookiecutter
    cookies
    covCore
    coverage
    coveralls
    crcmod
    credstash
    cryptography
    cssselect
    cssutils
    csvkit
    cvxopt
    cycler
    cymem
    cython
    cytoolz
    dask
    datadog
    dbfread
    ddt
    debtcollector
    decorator
    defusedxml
    dicttoxml
    diff-match-patch
    dill
    dns
    docker
    docker_compose
    docker_pycreds
    dockerpty
    docopt
    docutils
    dogpile_cache
    dropbox
    dulwich
    ecdsa
    elasticsearch
    elasticsearchdsl
    email_validator
    entrypoints
    enum
    enum-compat
    enum34
    et_xmlfile
    eventlet
    execnet
    extras
    Fabric
    factory_boy
    fake_factory
    faker
    falcon
    fasteners
    feedparser
    first
    fixtures
    flake8
    flaky
    flask_wtf
    freezegun
    funcsigs
    functools32
    future
    futures
    gdata
    gensim
    GeoIP
    geopy
    gevent
    gflags
    gitdb
    github3_py
    GitPython
    glances
    graphite_web
    graphviz
    greenlet
    grequests
    gspread
    h5py
    html2text
    html5lib
    httpbin
    httplib2
    httpretty
    humanize
    hvac
    hyperlink
    hypothesis
    idna
    imagesize
    incremental
    inflect
    inflection
    influxdb
    ipaddr
    ipaddress
    ipdb
    iptools
    ipykernel
    ipython
    ipython_genutils
    ipywidgets
    iso8601
    isodate
    isort
    itsdangerous
    jdcal
    jedi
    jellyfish
    jenkins-job-builder
    jenkinsapi
    jinja2
    jinja2_time
    jmespath
    joblib
    jsmin
    jsonpatch
    jsonpath_rw
    jsonpointer
    jsonschema
    jupyter
    jupyter_client
    jupyter_console
    jupyter_core
    kazoo
    Keras
    keyring
    keystoneclient
    kombu
    lazy-object-proxy
    ldap
    ldap3
    leather
    libcloud
    libtmux
    line_profiler
    linecache2
    lmdb
    lockfile
    Logbook
    logilab_common
    logutils
    lxml
    Mako
    markdown
    markupsafe
    marshmallow
    matplotlib
    mccabe
    meld3
    memcached
    memory_profiler
    mistune
    mock
    monotonic
    more-itertools
    moto
    mox3
    mpmath
    msgpack
    multiprocess
    munch
    murmurhash
    nbconvert
    nbformat
    ndg-httpsclient
    netaddr
    netifaces
    networkx
    nltk
    nose
    nose-exclude
    nosexcover
    notebook
    ntlm-auth
    numexpr
    numpy
    oauth2
    oauth2client
    oauthlib
    olefile
    openpyxl
    ordereddict
    osc
    osprofiler
    packaging
    paho-mqtt
    pandas
    pandocfilters
    paramiko
    parse
    parse-type
    parsedatetime
    parsel
    passlib
    paste
    PasteDeploy
    pathlib
    pathlib2
    pathpy
    pathspec
    pathtools
    patsy
    pbr
    pecan
    pep257
    pep8
    pexpect
    pg8000
    phonenumbers
    pickleshare
    pika
    pika-pool
    pillow
    pip
    pip-tools
    pkginfo
    plac
    plotly
    pluggy
    plumbum
    ply
    polib
    portend
    poyo
    premailer
    preshed
    prettytable
    progressbar
    prompt_toolkit
    protobuf
    psutil
    psycopg2
    ptyprocess
    publicsuffix
    py
    pyaml
    pyasn1
    pyasn1-modules
    pycodestyle
    pycountry
    pycparser
    pycrypto
    pycryptodome
    pycryptodomex
    pycurl
    pydispatcher
    pydns
    pydot
    pyflakes
    pygame
    pygeoip
    PyGithub
    pygments
    pyhamcrest
    pyinotify
    pyjwt
    pylibmc
    pylint
    pymongo
    pymysql
    pynacl
    pyodbc
    pyopenssl
    pypandoc
    pyparsing
    pyPdf
    pypdf2
    pyperclip
    pyproj
    pyramid
    pyRFC3339
    pyroute2
    pysaml2
    pyserial
    pysftp
    pysmi
    pysnmp
    pysocks
    pystache
    pytest
    pytest_xdist
    pytestcache
    pytestcov
    pytestrunner
    python-dateutil
    python-editor
    python-gnupg
    python-jenkins
    python-jose
    python-Levenshtein
    python-slugify
    python2-pythondialog
    python_keyczar
    python_magic
    python_mimeparse
    pythondaemon
    pytimeparse
    pytz
    pyusb
    pywinrm
    pyxdg
    pyyaml
    pyzmq
    qrcode
    qtconsole
    queuelib
    raven
    rcssmin
    recommonmark
    redis
    regex
    reportlab
    repoze_lru
    repoze_who
    requests
    requests-mock
    requests_ntlm
    requests_oauthlib
    requestsexceptions
    responses
    retry_decorator
    retrying
    rfc3986
    rjsmin
    robotframework
    routes
    rsa
    ruamel_ordereddict
    s3transfer
    scandir
    scapy
    scikitimage
    scikitlearn
    scipy
    scrapy
    seaborn
    secretstorage
    selenium
    semantic-version
    semver
    send2trash
    service-identity
    setproctitle
    setuptools
    setuptools-git
    setuptools_scm
    sh
    shapely
    simplegeneric
    simplejson
    singledispatch
    six
    slackclient
    smart_open
    smmap
    snowballstemmer
    socksipy-branch
    sortedcontainers
    sphinx
    sphinxcontrib-websupport
    sqlalchemy
    sqlalchemy_migrate
    sqlobject
    sqlparse
    statsd
    statsmodels
    stevedore
    stripe
    structlog
    subliminal
    subprocess32
    subunit
    suds-jurko
    supervisor
    sure
    swiftclient
    sympy
    tables
    tablib
    tabulate
    tblib
    tempita
    tempora
    termcolor
    terminado
    testfixtures
    testpath
    testrepository
    testscenarios
    testtools
    texttable
    Theano
    thinc
    thrift
    tmdb3
    toolz
    tox
    tqdm
    traceback2
    traitlets
    translationstring
    tweepy
    twine
    twitter
    txaio
    typing
    tzlocal
    ujson
    unicodecsv
    unidecode
    unittest2
    uritemplate
    uritemplate_py
    urllib3
    urwid
    vcversioner
    venusian
    vine
    virtual-display
    virtualenv
    virtualenv-clone
    virtualenvwrapper
    w3lib
    waitress
    Wand
    warlock
    watchdog
    wcwidth
    webcolors
    webencodings
    webob
    websocket_client
    webtest
    wheel
    whichcraft
    whoosh
    widgetsnbextension
    wrapt
    wtforms
    xattr
    xgboost
    xlrd
    xlwt
    xmltodict
    yamllint
    yapf
    youtube-dl
    zc_buildout
    zeep
    zeroconf
  ]);

  packages = lib.unique (corePackages ++ extraPackages);

in packages
